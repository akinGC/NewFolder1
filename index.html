<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div class="container">
    <h1>Add User</h1>
    <div style="display: flex;flex-direction:column">
      <label for="name">Name</label>
    <input type="text" name="name"value="" class="inptxt">
    </div>
    <div style="display: flex;flex-direction:column">
      <label for="email">Email</label>
    <input type="email" name="email"value="" class="inpmail">
    </div>
    <input type="button" class="inpbtn" value="Submit">
  </div>
  <div class="yui">
    <h1>registered Users</h1>
    
  </div>
</body>
<style>
  body{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .container{
    border: 1px solid black;
    height: 50vh;
    width: 30vw;
    margin-top: 10vh;
    display: flex;
    flex-direction: column;
    padding: 2vw;
    justify-content: space-around;
    background-color: gainsboro;
  }
  .inpbtn{
    background-color: rgb(55, 154, 235);
    color: white;
    border: none;
  }
  .inpbtn:active{
    transform: scale(1.01);
  }
  .yui{
    margin-top: 5vh;
  }
</style>

<script>
  let id=1;
  let btn=document.getElementsByClassName("inpbtn")[0];
  btn.addEventListener("click",(e)=>{
    let obj=[{
    names:document.getElementsByClassName("inptxt")[0].value,
    mails:document.getElementsByClassName("inpmail")[0].value
  }]




 let add={
  names:"akins",
  mails:"akins@gmail.com"
 }


localStorage.setItem(`objs${id}`,JSON.stringify(obj[0]))
id++;


  })

  window.addEventListener("DOMContentLoaded",(e)=>{
    for(let i=1;i<Infinity;i++){
  let objhere=JSON.parse(localStorage.getItem(`objs${i}`))
  if(objhere==null){
 
    break;
  }
  else{
   
    let ele=document.createElement("div");
 ele.innerHTML=`${objhere.names} : ${objhere.mails}`
 ele.className=`objs${i}`

 let newcr = document.createElement("button")
 newcr.appendChild(document.createTextNode("x"));

 let newedt = document.createElement("button");
 newedt.innerText="Edit";
 newedt.style.marginRight="1vw"
 newedt.style.marginLeft="1vw"

 ele.appendChild(newedt)
 ele.appendChild(newcr)

newedt.addEventListener("click",(e)=>{
  console.log(e.target.parentElement.className);

  let obj={
    names:document.getElementsByClassName("inptxt")[0].value,
    mails:document.getElementsByClassName("inpmail")[0].value
  }
  localStorage.setItem(e.target.parentElement.className,JSON.stringify(obj))

})

newcr.addEventListener("click",(e)=>{
  console.log(e.target.parentElement.className)
  localStorage.removeItem(`${e.target.parentElement.className}`)
  document.getElementsByClassName("yui")[0].removeChild(newcr.parentElement)
})
 document.getElementsByClassName("yui")[0].appendChild(ele);
 
  }
}
  })
</script>
</html>